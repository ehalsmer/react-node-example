(this.webpackJsonpapp1=this.webpackJsonpapp1||[]).push([[0],{309:function(e,n,a){e.exports=a(624)},314:function(e,n,a){},315:function(e,n,a){},344:function(e,n){},357:function(e,n){},359:function(e,n){},376:function(e,n){},378:function(e,n){},547:function(e,n){},624:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),s=a(16),o=a.n(s),c=a(299),i=(a(314),a(65)),l=(a(315),a(657)),m=a(127),u=function(){return r.a.createElement(l.a,{position:"static"},r.a.createElement(m.a,{variant:"h6"},"blockchat"))},p=a(661),f=a(625),g=a(662),d=a(663),h=a(664),b=a(668),E=a(665),v=a(669),O=a(300),y=a(179),j=a(293),S=a.n(j);function w(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}var N,k=Object(t.createContext)(),x={general:[{from:"ehalsmer",message:"Hello!",channel:"general"},{from:"lonavarro",message:"asdf",channel:"general"},{from:"anmoore",message:"Test test test!",channel:"general"}],questions:[{from:"ehalsmer",message:";oij3rn34n142,r v wer l342",channel:"questions"},{from:"user982",message:"What?",channel:"questions"},{from:"pumpkin",message:"Hi everyone",channel:"questions"},{from:"ehalsmer",message:"Stuff and things",channel:"questions"}],off_topic:[{from:"anmoore",message:"24kj4hlknsd !",channel:"off_topic"},{from:"lonavarro",message:"What lovely weather we're having",channel:"off_topic"},{from:"anmoore",message:"...",channel:"off_topic"}]},P=function(e,n){var a=n.payload,t=a.from,r=a.message,s=a.channel;switch(n.type){case"RECEIVE_MESSAGE":return function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?w(Object(a),!0).forEach((function(n){Object(y.a)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}({},e,Object(y.a)({},s,[].concat(Object(O.a)(e[s]),[{from:t,message:r,channel:s}])));default:return e}},I=function(e){N.emit("chat message",e)},C=function(e){var n=e.userSession,a=n.isUserSignedIn()?n.loadUserData().username:"user"+(100*Math.random()).toFixed(0),s=Object(t.useReducer)(P,x),o=Object(i.a)(s,2),c=o[0],l=o[1];return N||(N=S()()).on("chat message",(function(e){l({type:"RECEIVE_MESSAGE",payload:e})})),r.a.createElement(k.Provider,{value:{allMessages:c,sendMessageAction:I,user:a}},e.children)},U=Object(p.a)((function(e){return{root:{margin:"50px",padding:e.spacing(3,2)},flex:{display:"flex",alignItems:"center"},channelsWindow:{width:"30%",height:"300px",borderRight:"1px solid grey"},chatWindow:{width:"70%",height:"300px",padding:"20px"},chatBox:{width:"85%"},chatButton:{width:"15%"},chip:{margin:"4px"}}})),D=function(){var e=Object(t.useContext)(k),n=e.allMessages,a=e.sendMessageAction,s=e.user,o=Object.keys(n),c=Object(t.useState)(o[0]),l=Object(i.a)(c,2),u=l[0],p=l[1],O=Object(t.useState)(""),y=Object(i.a)(O,2),j=y[0],S=y[1],w=U();return r.a.createElement(f.a,{className:w.root},r.a.createElement(m.a,{variant:"h5",component:"h5"},u),r.a.createElement("div",{className:w.flex},r.a.createElement("div",{className:w.channelsWindow},r.a.createElement(g.a,null,o.map((function(e){return r.a.createElement(d.a,{onClick:function(e){return p(e.target.innerText)},key:e,button:!0},r.a.createElement(h.a,{primary:e}))})))),r.a.createElement("div",{className:w.chatWindow},n[u].map((function(e,n){return r.a.createElement("div",{className:w.flex,key:n},r.a.createElement(v.a,{size:"small",label:e.from,className:w.chip}),r.a.createElement(m.a,{variant:"body1"},e.message))})))),r.a.createElement("div",{className:w.flex},r.a.createElement(b.a,{margin:"normal",label:"Type message here",className:w.chatBox,value:j,onChange:function(e){return S(e.target.value)}}),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:w.button,onClick:function(){a({from:s,message:j,channel:u}),S("")}},"Send")))},M=a(294),A=a(295),W=a(301),R=a(296),_=a(302),q=a(96),B="https://s3.amazonaws.com/onename/avatar-placeholder.png",T=function(e){function n(e){var a;return Object(M.a)(this,n),(a=Object(W.a)(this,Object(R.a)(n).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return B}},username:"anonymous"},a}return Object(_.a)(n,e),Object(A.a)(n,[{key:"render",value:function(){var e=this.props,n=e.handleSignOut,a=e.userSession,t=this.state,s=t.person,o=t.username;return console.log("PERSON NAME: ",s.name()),console.log("PERSON object: ",s),a.isSignInPending()?null:r.a.createElement("div",{className:"panel-welcome",id:"section-2"},r.a.createElement("div",{className:"avatar-section"},r.a.createElement("img",{src:s.avatarUrl()?s.avatarUrl():B,className:"img-rounded avatar",id:"avatar-image",alt:""})),r.a.createElement("h1",null,"Hello, ",r.a.createElement("span",{id:"heading-name"},s.name()?s.name():"Nameless Person"),"!"),r.a.createElement("h2",null,"Username: ",o," "),r.a.createElement("p",{className:"lead"},r.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signout-button",onClick:n.bind(this)},"Logout")))}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new q.Person(e.loadUserData().profile),username:e.loadUserData().username})}}]),n}(t.Component),H=a(666),z=function(e){var n=e.handleSignIn;return r.a.createElement("div",{className:"panel-landing",id:"section-1"},r.a.createElement("p",{className:"lead"},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:"btn btn-primary btn-lg",id:"signin-button",onClick:n},"Sign In with Blockstack"),r.a.createElement(H.a,{orientation:"vertical"})))},F=a(667),G=a(298),J=Object(G.a)({palette:{primary:{main:"#f44336"},secondary:{main:"#ff8f00"}}});var L=function(){var e=new q.AppConfig,n=new q.UserSession({appConfig:e,redirectPath:"https://react-node-eg.herokuapp.com/"});console.log("userSession",n),console.log("isLoggedIn()",n.isUserSignedIn());var a=Object(t.useState)(),s=Object(i.a)(a,2),o=s[0],c=s[1];return Object(t.useEffect)((function(){n.isSignInPending()&&n.handlePendingSignIn().then((function(e){window.history.replaceState({},document.title,"/"),c(e)}))}),[o]),r.a.createElement(C,{userSession:n},r.a.createElement(F.a,{theme:J},r.a.createElement("div",{className:"App"},r.a.createElement(u,null),n.isUserSignedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{userSession:n,handleSignOut:function(e){e.preventDefault(),n.signUserOut(window.location.origin)}}),r.a.createElement(D,null)):r.a.createElement(z,{userSession:n,handleSignIn:function(e){e.preventDefault(),n.redirectToSignIn()}}))))};o.a.render(r.a.createElement(c.a,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.78394c40.chunk.js.map